name: run_workflow
on:
  workflow_dispatch:
    inputs:
      workflow_choice:
        description: 'Select the workflow to run'
        type: choice
        required: true
        default: 'test-ubuntu'
        options:
          - test-ubuntu
          - test-windows

jobs:
  run-workflow:
    runs-on: ubuntu-latest
    steps:
      - name: Check workflow choice and trigger
        run: |
          choice="${{ github.event.inputs.workflow_choice }}"
          if [ "${choice,,}" = "test-ubuntu" ]; then
            echo "Running test-ubuntu workflow"
            # Trigger test-ubuntu workflow
            curl -X POST \
              -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/${{ github.repository }}/actions/workflows/test-ubuntu/dispatches \
              -d '{"ref": "master"}'
          elif [ "${choice,,}" = "test-windows" ]; then
            echo "Running test-windows workflow"
            # Trigger test-windows workflow
            curl -X POST \
              -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/${{ github.repository }}/actions/workflows/test-windows/dispatches \
              -d '{"ref": "master"}'
          else
            echo "Invalid workflow choice"
          fi
